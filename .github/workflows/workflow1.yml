name: Workflow 1

on:
  push:
    # branches:
    #   - '**/pull/**' # Ignore branches with 'pull' in their name
    # branches:
    #   - '**'
  # pull_request:
  #   branches-ignore:
  #     - main
  workflow_call:
jobs:
  lints:
    # if: needs.pr-check.outputs.number == null
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Get pull requests for target branch
        id: get_pull_requests
        run: |
          # Set the target branch name
          TARGET_BRANCH="test"

          # Make the curl request to list pull requests for the repository
          PR_URL=$(curl -s -X GET "${{ github.api_url }}/repos/${{ github.repository }}/pulls?state=open" \
                    -H "Authorization: token ${{ github.token }}" \
                    -H "Accept: application/vnd.github.v3+json")

          # Filter pull requests for the target branch
          PR_LIST=$(echo "$PR_URL" | jq --arg target_branch "$TARGET_BRANCH" '.[] | select(.base.ref == $target_branch)')

          # Output the filtered pull requests
          echo "::set-output name=pull_requests::$PR_LIST"

      - name: Use the filtered pull requests
        run: |
          # Access the filtered pull requests from the previous step
          PR_LIST="$PR_LIST"

          # Print the filtered pull requests
          echo "Filtered Pull Requests:"
          echo "$PR_LIST"
